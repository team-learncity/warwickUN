{"version":3,"sources":["../src/darkmode.js"],"names":["define","$","Str","Ajax","SELECTORS","BTN","MODECLASS","ISACTIVATED","DarkMode","registerEventListeners","hasClass","setButtonText","prototype","click","toggleDarkMode","bind","toggleClass","request","call","methodname","args","done","get_string","then","nameStr","html"],"mappings":"AAsBAA,OAAM,wBAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,WAAvB,CAAD,CAAsC,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAuB,IAE3DC,CAAAA,CAAS,CAAG,CACZC,GAAG,CAAE,cADO,CAEZC,SAAS,CAAE,gBAFC,CAF+C,CAO3DC,CAAW,GAPgD,CAS3DC,CAAQ,CAAG,UAAW,CACtB,KAAKC,sBAAL,GAEA,GAAIR,CAAC,CAAC,MAAD,CAAD,CAAUS,QAAV,CAAmBN,CAAS,CAACE,SAA7B,CAAJ,CAA6C,CACzCC,CAAW,GACd,CAED,KAAKI,aAAL,EACH,CAjB8D,CAmB/DH,CAAQ,CAACI,SAAT,CAAmBH,sBAAnB,CAA4C,UAAW,CACnDR,CAAC,CAACG,CAAS,CAACC,GAAX,CAAD,CAAiBQ,KAAjB,CAAuB,UAAW,CAC9B,KAAKC,cAAL,EACH,CAFsB,CAErBC,IAFqB,CAEhB,IAFgB,CAAvB,CAGH,CAJD,CAMAP,CAAQ,CAACI,SAAT,CAAmBE,cAAnB,CAAoC,UAAW,CAC3Cb,CAAC,CAAC,MAAD,CAAD,CAAUe,WAAV,CAAsBZ,CAAS,CAACE,SAAhC,EAEAC,CAAW,CAAG,CAACA,CAAf,CAEA,GAAIU,CAAAA,CAAO,CAAGd,CAAI,CAACe,IAAL,CAAU,CAAC,CACrBC,UAAU,CAAE,4BADS,CAErBC,IAAI,CAAE,EAFe,CAAD,CAAV,CAAd,CAKAH,CAAO,CAAC,CAAD,CAAP,CAAWI,IAAX,CAAgB,UAAW,CACvB,KAAKV,aAAL,EACH,CAFe,CAEdI,IAFc,CAET,IAFS,CAAhB,CAGH,CAbD,CAeAP,CAAQ,CAACI,SAAT,CAAmBD,aAAnB,CAAmC,UAAW,CAC1C,GAAIJ,CAAJ,CAAiB,CACb,MAAOL,CAAAA,CAAG,CAACoB,UAAJ,CAAe,kBAAf,CAAmC,aAAnC,EACFC,IADE,CACG,SAASC,CAAT,CAAkB,CACpBvB,CAAC,CAACG,CAAS,CAACC,GAAX,CAAD,CAAiBoB,IAAjB,CAAsBD,CAAtB,CACH,CAHE,CAIV,CAED,MAAOtB,CAAAA,CAAG,CAACoB,UAAJ,CAAe,iBAAf,CAAkC,aAAlC,EACFC,IADE,CACG,SAASC,CAAT,CAAkB,CACpBvB,CAAC,CAACG,CAAS,CAACC,GAAX,CAAD,CAAiBoB,IAAjB,CAAsBD,CAAtB,CACH,CAHE,CAIV,CAZD,CAcA,MAAO,CACH,KAAQ,eAAW,CACf,MAAO,IAAIhB,CAAAA,CACd,CAHE,CAKV,CA3DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contain the logic for dark mode.\n *\n * @package    theme_moove\n * @copyright  2020 Willian Mano - http://conecti.me\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'core/str', 'core/ajax'], function($, Str, Ajax) {\n\n    var SELECTORS = {\n        BTN: '#darkmodebtn',\n        MODECLASS: 'moove-darkmode'\n    };\n\n    var ISACTIVATED = false;\n\n    var DarkMode = function() {\n        this.registerEventListeners();\n\n        if ($('body').hasClass(SELECTORS.MODECLASS)) {\n            ISACTIVATED = true;\n        }\n\n        this.setButtonText();\n    };\n\n    DarkMode.prototype.registerEventListeners = function() {\n        $(SELECTORS.BTN).click(function() {\n            this.toggleDarkMode();\n        }.bind(this));\n    };\n\n    DarkMode.prototype.toggleDarkMode = function() {\n        $('body').toggleClass(SELECTORS.MODECLASS);\n\n        ISACTIVATED = !ISACTIVATED;\n\n        var request = Ajax.call([{\n            methodname: 'theme_moove_toggledarkmode',\n            args: {}\n        }]);\n\n        request[0].done(function() {\n            this.setButtonText();\n        }.bind(this));\n    };\n\n    DarkMode.prototype.setButtonText = function() {\n        if (ISACTIVATED) {\n            return Str.get_string('darkmode_disable', 'theme_moove')\n                .then(function(nameStr) {\n                    $(SELECTORS.BTN).html(nameStr);\n                });\n        }\n\n        return Str.get_string('darkmode_enable', 'theme_moove')\n            .then(function(nameStr) {\n                $(SELECTORS.BTN).html(nameStr);\n            });\n    };\n\n    return {\n        'init': function() {\n            return new DarkMode();\n        }\n    };\n});"],"file":"darkmode.min.js"}